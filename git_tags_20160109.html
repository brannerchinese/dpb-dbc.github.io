<!DOCTYPE html>
<html>
  <head>
    <!-- Template from https://github.com/gnab/remark, 20151228 -->
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Git Tags
## David Branner, Dev Bootcamp
## 20160109

---

## What these slides cover
--


 1. Tagging the Current Commit
--


 1. Pushing Tags to a Remote Repository
--


 1. What do Tags Look Like on GitHub?
--


 1. Checking Out a Tagged Commit
--


 1. Fancier Tags
--


 1. Tagging a Past Commit or Deleting an Existing Tag
--


 1. Documentation and Glossary
---

## Tagging the Current Commit
--


Once you are satisfied that your current commit represents a significant release or stage in your project's development, you can assign it a "tag". 
--


Normally the tag is a version (such as "v0.1") or release number ("release 0"), but you can use any string as long as it doesn't have spaces.
--


(Below I've used `$` to stand for your command-line prompt — don't type it. If the tagging is successful, Git makes no reply.)
--

```git
$ git tag release_0
```
--

This is called a "lightweight" tag, because it contains no information beyond the tag-name and the associated commit-hash.
---

## Pushing Tags to a Remote Repository
--


You can push a single tag to the remote repository like this:
--

```git
$ git push origin release_0
Total 0 (delta 0), reused 0 (delta 0)
To git@github.com:account_name/repo_name.git
 * [new tag]         release_0 -> release_0
```
--

Or you can push all tags in the current reponsitory at once:
--

```git
$ git push origin --tags
```
--

Now view your tags:
--

```git
$ git tag
```

---

## What do Tags Look Like on GitHub?
--


In the upper left corner of a GitHub repository page is a drop-down menu that lets you select different branches.
--


Once it's open, you'll find a tab labelled "Tags". click on that and you'll see any tags that have been pushed to GitHub:
--


![Git tags on GitHub](images/git_tags_on_github.png)
--


and you can choose one.

---

## Checking Out a Tagged Commit
--


Only commits can be checked out, not tags. 
--

A branch can be checked out because a branch is simply a label for a particular commit. 
--

But a branch is a moveable label — it always points to the newest commit in a tree (unless you move it to point somewhere else). A tag is not moveable at all.
--


If you try to checkout a tag, you will end up in "detached HEAD" state, which means you are not in any branch at all.
--


However, you can create and checkout a branch that corresponds to a particular tag:

```git
$ git checkout -b <branch-name> <tag-name>
```
--

Here we are creating a new branch named `<branch-name>` that points to the commit tagged `<tag-name>`, and checking the new branch out as sono as it comes into being.
--


For clarity, I advise not using a branch-name that is identical to a tag-name:
--

```git
$ git checkout -b release_0_branch release_0
```

---
## Fancier Tags
--

Tags that are not considered "lightweight" may have an "annotation" or be signed with a GPG key. Here I cover annotation:
--

```git
$ git tag -a release_1
```
--

Git will now open your default editor and let you annotate the tag with a "tag message". 
--

An empty message will abort the act of tagging.
--


Alternately, you can include the message in the same line as the annotation:
--

```git
$ git tag -a release_1 -m "Yes and this is Release 1"
```
--

(In this case there is nothing for tagging that corresponds to `git commit -v` for verbose tag-messaging, so you have to use `-m`.)
---
## Fancier Tags, cont'd
--


Note that if you've already created a tag, you can't annotate it after the fact: 
--

```git
$ git tag -a release_1
$ git tag -a release_1 -m "Release 1"
fatal: tag 'release_1' already exists
```
--
unless you use `--force`, shorthand `-f`:

```git
$ git tag -a release_1 -f -m "Release 1"
Updated tag 'release_1' (was e09fc29)
```
--

If you have already pushed the earlier tag, you may also have to force-push:
--


```git
$ git push -f --tags
```
---

## Tagging a Past Commit or Deleting an Existing Tag
--


To add a tag to a past commit, you have to name its commit-hash explicitly:

```git
$ git tag -a release_0 e09fc29
```
--


To delete a past commit (which you may want to do before revising its name or tag-message):
--

```git
$ git tag -d release_0
Deleted tag 'release_0' (was e09fc29)
```
--

If you do this, how do you delete the same tag on the remote server? Just using `git push --tags` won't do anything. 
--


Instead, prepend a colon to the tag-name:
--

```git
$ git push origin :release_0
To git@github.com:account_name/repo_name.git
 - [deleted]         release_0
```
---

## Documentation and Glossary
--


See the man page at

```git
$ git help tag
```

This contains discussion on altering a past tag, under "On Re-tagging", and a number of other matters of interest.
--


There is also a useful glossary of Git terminology on the [Git home site](https://git-scm.com/docs/gitglossary). You can access the same content at the command line with
--

```git
man gitglossary
```
---

## Terminology Review

 1. **tag**
--
: a non-moveable label for a Git commit
--


 1. **lightweight**
--
: describes a tag that doesn't have an annotation and isn't GPG-signed
--


 1. **annotation**
--
: a tag-message
--


 1. **branch**
--
: a moveable label for a Git commit
--


 1. **detached HEAD state**
--
: the state of having one's HEAD pointing to a commit that isn't the tip of a branch

---

class: center, middle

## END

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>

<!-- From http://joshbode.github.io/remark/ansi.html#3, 20151229 -->
    <script src="http://gnab.github.io/remark/downloads/remark-latest.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type="text/javascript">
      var hljs = remark.highlighter.engine;
    </script>
    <script src="terminal.language.js" type="text/javascript"></script>
    <script type="text/javascript">
      var slideshow = remark.create({
        highlightStyle: 'solarized_dark'
      });
      // extract the embedded styling from ansi spans
      $('code.terminal > span.hljs-ansi').replaceWith(function(i, x) {
        return x.replace(/<(\/?(\w+).*?)>/g, '<$1>')
      });
    </script>
  </body>
</html>
